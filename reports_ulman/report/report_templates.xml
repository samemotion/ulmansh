<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>

<report id="printboleta_report" string="Print Boleta" model="account.invoice" report_type="qweb-pdf" name="reports_ulman.printboleta" attachment="(object.state in ('open','paid')) and ('FAC'+(object.number or '').replace('/','')+'.pdf')" />
<template id="printboleta_document">
    <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})"/>
    <div class="article">
        <div class="page" style="font-size:14px;font-family:sans-serif;">
            <table>
                <tr>
                    <td>
                        <table>
                            <tr style="height:63mm">
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        Fecha: <span t-field="o.date_invoice"/>
                                    </td>
                                    <td>
                                        <span t-if="o.origin">Pedido: <span t-field="o.origin"/></span>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        Señor(es): <span t-field="o.partner_id"/>
                                    </td>
                                    <td>
                                        D.I. <span t-field="o.partner_id.vat"/>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:230mm">
                                        <t t-if="o.partner_id.street">
                                            Direccion: <span t-esc="o.partner_id.street[:120]"/>
                                        </t>
                                        <t t-if="not o.partner_id.street">
                                            Direccion:
                                        </t>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:22mm">
                                    </td>
                                    <td style="width:210mm">
                                        <span t-field="o.partner_id.street2"/>
                                        , <span t-field="o.partner_id.city"/>
                                        , <span t-field="o.partner_id.state_id"/>
                                        , <span t-field="o.partner_id.country_id"/>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <tr style="height:10mm">
                                    </tr>
                                </table>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <table style="height:56mm">
                        <td>
                            <table>
                                <tbody class="invoice_tbody" >
                                    <tr t-foreach="o.invoice_line_ids" t-as="l" >
                                        <t t-set="igv" t-value="1+l.invoice_line_tax_ids.amount"/>
                                        <t t-set="precio_unit" t-value="round(l.price_unit*(100-l.discount)/100,4)"/>
                                        <t t-set="precio_subtotal" t-value="(precio_unit*l.quantity)"/>
                                        <t t-set="precio_total" t-value="round(igv*l.price_subtotal,2)"/> 
                                        <td style="width:5mm">
                                        </td>
                                        <td style="width:75px;height:12">
                                            <span t-field="l.quantity"/>
                                        </td>
                                        <td style="width:600px">                                            
                                            <t t-if="l.product_id.type == 'product' or l.product_id.type == 'consu'">
                                                <span t-field="l.product_id"/>
                                            </t>
                                            <t t-if="l.product_id.type == 'service'">
                                                <span t-field="l.name"/>
                                            </t>
                                        </td>
                                        <td class="text-right" style="width:90px">
                                            <span t-esc="'{0:,.2f}'.format(precio_unit)"/>
                                        </td>
                                        <td class="text-right" style="width:110px">
                                            <span t-esc="'{0:,.2f}'.format(precio_subtotal)"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </table>
                </tr>
            </table>
            <table>
                <tr >
                    <td style="width:5mm"></td> 
                    <td style="width:220mm">
                        SON: <span t-field="o.x_amount_in_words"/>
                    </td>
                </tr>
                <tr style="height:5mm">
                </tr>
            </table>
            <table>
                <tr >
                    <td style="width:195mm"></td> 
                    <td class="text-right" style="width:40mm">
                        <span t-esc="'{0:,.2f}'.format(o.amount_total)"/>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</template>

<template id="printboleta">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="reports_ulman.printboleta_document" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>

<report id="printfactura_report" string="Print Factura" model="account.invoice" report_type="qweb-pdf" name="reports_ulman.printfactura" attachment="(object.state in ('open','paid')) and ('FAC'+(object.number or '').replace('/','')+'.pdf')" />
<template id="printfactura_document">
    <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})"/>
<div class="article">
        <div class="page" style="font-size:14px;font-family:sans-serif;">
            <table >
                <tr>
                    <td>
                        <table>
                            <tr style="height:63mm">
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:67mm">
                                        Fecha: <span t-field="o.date_invoice"/>
                                    </td>
                                    <td style="width:100mm">
                                        <span t-if="o.name">Referencia: <span t-field="o.name"/></span>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        Señor(es): <span t-field="o.partner_id"/>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        RUC: <span t-field="o.partner_id.vat"/>
                                    </td>
                                    <td>
                                        <span t-if="o.origin">Pedido: <span t-field="o.origin"/></span>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:230mm">
                                        <t t-if="o.partner_id.street">
                                            Direccion: <span t-esc="o.partner_id.street[:120]"/>
                                        </t>
                                        <t t-if="not o.partner_id.street">
                                            Direccion:
                                        </t>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:22mm">
                                    </td>
                                    <td style="width:210mm">
                                        <span t-field="o.partner_id.street2"/>
                                        , <span t-field="o.partner_id.city"/>
                                        , <span t-field="o.partner_id.state_id"/>
                                        , <span t-field="o.partner_id.country_id"/>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <tr style="height:18mm">
                                    </tr>
                                </table>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <table style="height:179mm">
                        <td>
                            <table>
                                <tbody class="invoice_tbody" >
                                    <tr t-foreach="o.invoice_line_ids" t-as="l" >
                                        <t t-set="precio_unit" t-value="round(l.price_subtotal/l.quantity, 2)"/>
                                        <td style="width:5mm">
                                        </td>
                                        <td style="width:75px;height:12">
                                            <span t-field="l.quantity"/>
                                        </td>
                                        <td style="width:600px">
                                            <t t-if="l.product_id.type == 'product' or l.product_id.type == 'consu'">
                                                <span t-field="l.product_id"/>
                                            </t>
                                            <t t-if="l.product_id.type == 'service'">
                                                <span t-field="l.name"/>
                                            </t>
                                        </td>
                                        <td class="text-right" style="width:90px">
                                            <span t-esc="'{0:,.2f}'.format(precio_unit)"/>
                                        </td>
                                        <td class="text-right" style="width:110px">
                                            <span t-esc="'{0:,.2f}'.format(l.price_subtotal)"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </table>
                </tr>
            </table>
            <table>
                <tr>
                    <td style="width:20mm"></td>
                    <td style="width:220mm">
                        <span t-field="o.x_amount_in_words"/>
                    </td>
                </tr>
                <tr style="height:2mm">
                </tr>
            </table>
            <table>
                <tr>
                    <td style="width:192mm"></td>
                    <td class="text-right" style="width:10mm">
                        18
                    </td>
                </tr>
                <tr style="height:5mm">
                </tr>
            </table>
            <table>
                <tr style="height:20">
                    <td style="width:550px"></td>         
                    <td class="text-right" style="width:110px">
                        S/ <span t-esc="'{0:,.2f}'.format(o.amount_untaxed)"/>
                    </td>
                    <td class="text-right" style="width:120px">
                        S/ <span t-esc="'{0:,.2f}'.format(o.amount_tax)"/>
                    </td>
                    <td class="text-right" style="width:110px">
                        S/ <span t-esc="'{0:,.2f}'.format(o.amount_total)"/>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</template>

<template id="printfactura">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="reports_ulman.printfactura_document" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>

<report id="printnotacredito_report" string="Print Nota Credito" model="account.invoice" report_type="qweb-pdf" name="reports_ulman.printnotacredito" attachment="(object.state in ('open','paid')) and ('FAC'+(object.number or '').replace('/','')+'.pdf')" />
<template id="printnotacredito_document">
    <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})"/>
    <div class="article">
        <div class="page" style="font-size:14px;font-family:sans-serif;">
            <table>
                <tr>
                    <td>
                        <table>
                            <tr style="height:58mm">
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        Fecha: <span t-field="o.date_invoice"/>
                                    </td>
                                    <td>
                                        COMPROBANTE QUE MODIFICA
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        Señor(es): <span t-field="o.partner_id"/>
                                    </td>
                                    <td>
                                        Tipo: <span t-field="o.refund_invoice_id.journal_id.x_invoice_type"/>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        D.I. <span t-field="o.partner_id.vat"/>
                                    </td>
                                    <td>
                                        <t t-if="o.refund_invoice_id.journal_id.x_invoice_type=='TK'">
                                            <t t-if="o.refund_invoice_id.journal_id.x_printer_sn">
                                                Serie: <span t-field="o.refund_invoice_id.journal_id.x_printer_sn"/>
                                            </t>
                                            <t t-if="not o.refund_invoice_id.journal_id.x_printer_sn">
                                                Serie: 
                                            </t>
                                        </t>
                                        <t t-if="o.refund_invoice_id.journal_id.x_invoice_type!='TK'">
                                            <t t-if="o.refund_invoice_id.number">
                                                Serie: <span t-esc="o.refund_invoice_id.number[:3]"/>
                                            </t>
                                            <t t-if="not o.refund_invoice_id.number">
                                                Serie: 
                                            </t>
                                        </t>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:5mm">
                                    </td>
                                    <td style="width:185mm">
                                        <t t-if="o.partner_id.street">
                                            Direccion: <span t-esc="o.partner_id.street[:120]"/>
                                        </t>
                                        <t t-if="not o.partner_id.street">
                                            Direccion:
                                        </t>
                                    </td>
                                    <td>
                                        <t t-if="o.refund_invoice_id.journal_id.x_invoice_type=='TK'">
                                            <t t-if="o.refund_invoice_id.number">
                                                Numero: <span t-field="o.refund_invoice_id.number"/>
                                            </t>
                                            <t t-if="not o.refund_invoice_id.number">
                                                Numero: 
                                            </t>
                                        </t>
                                        <t t-if="o.refund_invoice_id.journal_id.x_invoice_type!='TK'">
                                            <t t-if="o.refund_invoice_id.number">
                                                Numero: <span t-esc="o.refund_invoice_id.number[4:]"/>
                                            </t>
                                            <t t-if="not o.refund_invoice_id.number">
                                                Numero: 
                                            </t>
                                        </t>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <td style="width:22mm">
                                    </td>
                                    <td style="width:168mm">
                                        <span t-field="o.partner_id.street2"/>
                                        , <span t-field="o.partner_id.city"/>
                                        , <span t-field="o.partner_id.state_id"/>
                                        , <span t-field="o.partner_id.country_id"/>
                                    </td>
                                    <td>
                                        Fecha de Emision: <span t-field="o.refund_invoice_id.date_invoice"/>
                                    </td>
                                </table>
                            </tr>
                            <tr>
                                <table>
                                    <tr style="height:10mm">
                                    </tr>
                                </table>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <table style="height:44mm">
                        <td>
                            <table>
                                <tbody class="invoice_tbody" >
                                    <tr t-foreach="o.invoice_line_ids" t-as="l" >
                                        <t t-set="igv" t-value="1+l.invoice_line_tax_ids.amount"/>
                                        <t t-set="precio_unit" t-value="round(l.price_unit*(100-l.discount)/100,4)"/>
                                        <t t-set="precio_subtotal" t-value="(precio_unit*l.quantity)"/>
                                        <t t-set="precio_total" t-value="round(igv*l.price_subtotal,2)"/> 
                                        <td style="width:5mm">
                                        </td>
                                        <td style="width:75px;height:12">
                                            <span t-esc="'{0:,.2f}'.format(abs(l.quantity))"/>
                                        </td>
                                        <td style="width:600px"><span t-field="l.product_id"/></td>
                                        <td class="text-right" style="width:90px">
                                            <span t-esc="'{0:,.2f}'.format(abs(precio_unit))"/>
                                        </td>
                                        <td class="text-right" style="width:110px">
                                            <span t-esc="'{0:,.2f}'.format(abs(precio_subtotal))"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </table>
                </tr>
            </table>
            <table>
                <tr >
                    <td style="width:5mm"></td> 
                    <td style="width:220mm">
                        SON: <span t-field="o.x_amount_in_words"/>
                    </td>
                </tr>
            </table>
            <table>
                <tr>
                    <td style="width:195mm"></td>
                    <td class="text-right" style="width:40mm">
                        <span t-esc="'{0:,.2f}'.format(o.amount_untaxed)"/>
                    </td>
                </tr>
                <tr style="height:5mm">
                </tr>
                <tr>
                    <td style="width:195mm"></td>
                    <td class="text-right" style="width:40mm">
                        <span t-esc="'{0:,.2f}'.format(o.amount_tax)"/>
                    </td>
                </tr>
                <tr style="height:5mm">
                </tr>
                <tr>
                    <td style="width:195mm"></td>
                    <td class="text-right" style="width:40mm">
                        <span t-esc="'{0:,.2f}'.format(o.amount_total)"/>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</template>

<template id="printnotacredito">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="reports_ulman.printnotacredito_document" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>

<report id="printticket_report" string="Print Ticket" model="account.invoice" report_type="qweb-pdf" name="reports_ulman.printticket" attachment="(object.state in ('open','paid')) and ('FAC'+(object.number or '').replace('/','')+'.pdf')" />
<template id="printticket_document">
    <t t-set="o" t-value="o.with_context({'lang':o.partner_id.lang})"/>
    <div class="article">
            <div  class="page">

                <style type="text/css">
                    <![CDATA[
                        /* Inconsolata */
                       @font-face {
                       font-family: 'Inconsolata';
                       src: local('Inconsolata'), url(http://fonts.gstatic.com/s/inconsolata/v10/7bMKuoy6Nh0ft0SHnIGMuaCWcynf_cDxXwCLxiixG1c.ttf) format('truetype');
                       }
                   ]]>
                </style>

                <div style="font-family: Inconsolata; font-size: 1.5em; line-height:18px;">
                    <div >
                        <h2  style="text-align: center" t-esc="o.user_id.company_id.partner_id.x_business_name"/>
                        <div style="text-align: center">
                            <span t-esc="o.user_id.company_id.name"/>
                        </div>
                        <div style="text-align: center">
                            RUC: <span t-esc="o.user_id.company_id.vat"/>
                        </div>
                        <div style="text-align: center">
                            <span t-esc="o.user_id.company_id.street"/>
                            <text>, </text>
                            <span t-field="o.user_id.company_id.street2"/>
                            <text>, </text>
                            <span t-field="o.user_id.company_id.city"/>
                            <text>, </text>
                            <span t-field="o.user_id.company_id.state_id"/>
                        </div>
                        <div style="text-align: center">
                            Teléfono: <span t-esc="o.user_id.company_id.phone"/><br/>
                        </div>
                        <div >
                            <br/>
                        </div>
                        <div>
                            Ticket: <span t-esc="o.number"/><br/>
                            Serie: <span t-esc="o.journal_id.x_printer_sn"/><br/>
                            Fecha: <span t-field="o.create_date"/><br/>
                            Pedido: <span t-esc="o.x_pos_order.name"/><br/>
                            Recibo: <span t-esc="o.x_pos_order.pos_reference"/><br/>
                            Cajero: <span t-field="o.user_id"/><br/>
                            Vendedor: <span t-field="o.x_pos_order.user_id"/><br/>
                            <t t-if="o.partner_id.company_type=='person'">
                                Cliente: <span t-field="o.partner_id.name"/><br/>
                                DNI: <span t-field="o.partner_id.vat"/><br/>
                            </t>
                            <t t-if="o.partner_id.company_type=='company'">
                                Razon Social/Nombre: <span t-field="o.partner_id.name"/><br/>
                                RUC: <span t-field="o.partner_id.vat"/><br/>
                            </t>
                        </div>
                    </div>

                    <br/>

                <table style="width:100%">
                    <colgroup>
                        <col align="left" width='7%' />
                        <col align="left" width='55%' />
                        <col align="right" width='19%' />
                        <col align="right" width='19%' />
                    </colgroup>

                    <thead>
                        <tr>
                            <th class="text-left">Un.</th>
                            <th>Description</th>
                            <th class="text-right">P.U.</th>
                            <th class="text-right">Price</th>
                        </tr>
                    </thead>

                    <t t-set="subtotal" t-value="0"/>
                    <t t-set="descuento" t-value="0"/>

                    <tbody>
                        <tr t-foreach="o.invoice_line_ids" t-as="line">
                            <t  t-set="precio_unit" t-value="round(line.price_unit*(100-line.discount)/100,4)"/>
                            <t  t-set="precio_subtotal" t-value="(precio_unit*line.quantity)"/>
                            <t  t-set="subtotal" t-value="subtotal+precio_subtotal"/>
                            <td style="text-align: left">
                                <span t-esc="'{0:,.0f}'.format(int(line.quantity))"/>
                            </td>
                            <td><span t-field="line.product_id"/></td>
                            <td class="text-right">
                                <span t-esc="'{0:,.2f}'.format(precio_unit)"/>
                                <t t-if="line.discount != 0.0">
                                    Dto. 
                                </t>
                            </td>
                            <td class="text-right">
                                <span t-esc="'{0:,.2f}'.format(precio_subtotal)"/>
                                <t t-if="line.discount != 0.0">
                                    <span t-esc="'%0.2f'%line.discount"/>%
                                    <t t-set="descuento" t-value="descuento+round(line.price_unit*line.quantity*line.discount/100, 2)"/>
                                </t>
                            </td>
                        </tr>
                    </tbody>
                </table>

                    <div class="row zero_min_height">
                        <div style="width: 100%">
                            <div style="border-bottom: 1px solid black;"/>
                        </div>
                    </div>

                    <div class="row">
                        <div >
                            <table style="width: 96%" >
                                <colgroup>
                                    <col align="left" width='74%' />
                                    <col align="right" width='22%' />
                                </colgroup>
                                <tbody>
                                    <t t-if="descuento != 0.0">
                                        <tr>
                                            <td class="text-right"><span>Total Descuentos S/.</span></td>
                                            <td class="text-right">
                                                <span t-esc="'{0:,.2f}'.format(descuento)"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <tr>
                                        <td class="text-right"><span>Subtotal S/</span></td>
                                        <td class="text-right">
                                            <span t-esc="'{0:,.2f}'.format(o.amount_untaxed)"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-right"><span>IGV 18% S/</span></td>
                                        <td class="text-right">
                                            <span t-esc="'{0:,.2f}'.format(o.amount_tax)"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="text-right"><span>Total S/</span></td>
                                        <td class="text-right">
                                            <span t-esc="'{0:,.2f}'.format(o.amount_total)"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <br/>

                    <table style="width: 100%" >
                        <colgroup>
                            <col align="right" width='74%' />
                            <col align="right" width='26%' />
                        </colgroup>
                        <thead>
                            <tr>
                                <th class="text-right">Payment Mode</th>
                                <th class="text-right">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="o.x_pos_order.statement_ids" t-as="d">
                                <t t-if="d.amount > 0">
                                    <td class="text-right">
                                        <span t-esc="d.journal_id.name"/> S/
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="'{0:,.2f}'.format(d.amount)"/>
                                    </td>
                                </t>
                            </tr>
                        </tbody>
                        <tbody>
                            <tr t-foreach="o.x_pos_order.statement_ids" t-as="d">
                                <t t-if="0 > d.amount">
                                    <t t-set="vuelto" t-value="abs(d.amount)"/>
                                    <td class="text-right">
                                        Vuelto S/
                                    </td>
                                    <td class="text-right">
                                        <span t-esc="'{0:,.2f}'.format(vuelto)"/>
                                    </td>
                                </t>
                            </tr>
                        </tbody>
                    </table>

                    <br/>

                    <div class="text-left" style="width: 96%" t-esc="o.user_id.company_id.x_ticket_note"/>
                 
                </div>
            </div>
     </div>
</template>

<template id="printticket">
    <t t-call="web.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="reports_ulman.printticket_document" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>

</data>
</odoo>

